GENEARL PROCEDURE FOR HOMING THE SYSTEM

1. HOME CLUTCH MOTOR FIRST, THEN LINEARS SIMULTANEOUSLY


CLUTCH MOTOR HOMING

1. ZERO THE ENCODER POSITION JUST FOR GOOD MEASURE

10. ROTATE MOTOR IN FWD DIR UNTIL HALL #1 ("ENGAGED") SENSOR IS TRIGGERED, THEN STOP THE MOTOR.
    E --> motor completes full rev without triggereding sensor
    E --> motor stalls for longer than 250ms

12. REV DIR UNTIL HALL#1 IS UNTRIGGERED THEN STOP
    E --> motor completes half rev without untriggereding sensor
    E --> motor stalls for longer than 250ms

14. FWD AGAIN AT CREEP SPEED TO TRIGGER THE SENSOR, RECORD POSITION UPON TRIGGERING THEN STOP MOTOR
    E --> motor completes half rev without untriggereding sensor
    E --> motor stalls for longer than 250ms

15. ADJUST ENCODER POSITION USING DIFF BETWEEN CURRENT POSITION AND RECORDED POSITION AND ADD IT TO THE DESIRED POSITION READING (CFG PARAM) WITH CALIBRATION OFFSET (CALIBRATION PARAM)

20. MOTOR MOVES FWD TO THE DISENGANGED POSITION (@ 228DEG - CFG PARAM)

21. CHECK THAT HALL#2 (DISENGAGED) SENSOR IS TRIGGERED
    WARN --> sensor does not trigger, indicating something is either out of position, wired incorrectly, bad cable

22. MOVE BACK TO ENGAGED POSITION (0DEG)



TASK: MOVE CLUTCH TO DISENGAGED POSITION
0. VALIDATE CLUTCH MOTOR IS NEAR 0DEG
1. MOVE MOTOR TO DISENGAGED POSITION 228DEG (CFG PARAM)
2. ACTIVELY HOLD MOTOR POSITION AT 228DEG


TASK: MOVE CLUTCH TO DISENGAGED POSITION
0. VALIDATE CLUTCH MOTOR IS NEAR 228DEG
1. MOVE MOTOR TO ENGAGED POSITION 0DEG
2. STOP MOTOR (NO ACTIVE HOLDING)



LINEAR MOTORS HOMING

1. VERIFY CLUTCH IS HOMED AND IN "ENGAGED" POSITION

2. PERFORM "MOVE CLUTCH TO DISENGAGED POSITION" TASK

3. HOME TO HARD STOP USING CFG DIRECTION
    E--> IF DISTANCE TRAVEL EXCEEDS THE 1.25 of FEASIBLE TRAVEL FROM HARD STOP TO HARD STOP
    

